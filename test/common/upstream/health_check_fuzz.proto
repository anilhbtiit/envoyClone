syntax = "proto3";

package test.common.upstream;

message HealthCheckConfig {

}

message HttpHealthCheckConfig {
    HealthCheckConfig config = 1;
    string host = 2;
    string path = 3;
}

message Respond {
    string code = 1;
    boolean conn_close = 2;
    boolean proxy_close = 3;
    boolean body = 4;
    boolean trailers = 5;
    boolean degraded = 6;
}

message DegradationBehavior {
    boolean degraded = 1;
    int simulated_time_seconds_for_degradation = 2;
}

message Action {
    oneof action_selector {
        Respond respond = 1;
        boolean stream_create = 2;
        DegradationBehavior = 3;
    }
}

message HttpHealthCheckTestCase {
    HealthCheck config = 1; #Health Check config directly
    repeated Action actions = 2;
}