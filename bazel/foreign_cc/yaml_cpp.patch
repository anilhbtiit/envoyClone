diff --git a/BUILD.bazel b/BUILD.bazel
index b0b9016..6f93e94 100644
--- a/BUILD.bazel
+++ b/BUILD.bazel
@@ -1,3 +1,10 @@
+yaml_cpp_copts = select({
+    # Ignore linker warning
+    "@envoy//bazel:windows_x86_64": ["/ignore:4217"],
+    # Remove these after upstream fix.
+    "//conditions:default": [""],
+})
+
 cc_library(
     name = "yaml-cpp_internal",
     visibility = ["//:__subpackages__"],
@@ -11,4 +18,6 @@ cc_library(
     includes = ["include"],
     hdrs = glob(["include/**/*.h"]),
     srcs = glob(["src/**/*.cpp", "src/**/*.h"]),
+    local_defines = ["yaml_cpp_EXPORTS"],
+    copts = yaml_cpp_copts,
 )
