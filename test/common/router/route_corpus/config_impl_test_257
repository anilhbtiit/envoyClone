config {
  name: "AllRedirects"
  virtual_hosts {
    name: "redirect"
    domains: "redirect.lyft.com"
    routes {
      match {
        prefix: "/prefix"
      }
      redirect {
        prefix_rewrite: "/new/prefix"
      }
    }
    routes {
      match {
        path: "/path/"
      }
      redirect {
        prefix_rewrite: "/new/path/"
      }
    }
    routes {
      match {
        prefix: "/host/prefix"
      }
      redirect {
        host_redirect: "new.lyft.com"
        prefix_rewrite: "/new/prefix"
      }
    }
    routes {
      match {
        regex: "/[r][e][g][e][x].*"
      }
      redirect {
        prefix_rewrite: "/new/regex-prefix/"
      }
    }
    routes {
      match {
        prefix: "/http/prefix"
      }
      redirect {
        https_redirect: true
        prefix_rewrite: "/https/prefix"
      }
    }
    routes {
      match {
        prefix: "/ignore-this/"
      }
      redirect {
        prefix_rewrite: "/"
      }
    }
    routes {
      match {
        prefix: "/ignore-this"
      }
      redirect {
        prefix_rewrite: "/"
      }
    }
    routes {
      match {
        prefix: "/ignore-substring"
      }
      redirect {
        prefix_rewrite: "/"
      }
    }
    routes {
      match {
        prefix: "/service-hello/"
      }
      redirect {
        prefix_rewrite: "/"
      }
    }
  }
}
headers {
  headers {
    key: ":authority"
    value: "www.foo.com"
  }
  headers {
    key: ":path"
    value: "/foo"
  }
  headers {
    key: "x-forwarded-proto"
    value: "https"
  }
  headers {
    key: "x-envoy-internal"
    value: "true"
  }
}
