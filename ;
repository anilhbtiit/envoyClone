Review comments

Signed-off-by: Dhi Aurrahman <dio@tetrate.io>

# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
#
# On branch no-userlightdata
# Changes to be committed:
#	modified:   source/extensions/filters/http/lua/lua_filter.h
#	modified:   tools/code_format/check_format.py
#
# ------------------------ >8 ------------------------
# Do not modify or remove the line above.
# Everything below it will be ignored.
diff --git a/source/extensions/filters/http/lua/lua_filter.h b/source/extensions/filters/http/lua/lua_filter.h
index 53e885db21..0a9733989f 100644
--- a/source/extensions/filters/http/lua/lua_filter.h
+++ b/source/extensions/filters/http/lua/lua_filter.h
@@ -309,6 +309,7 @@ private:
   std::function<void()> yield_callback_;
   Http::AsyncClient::Request* http_request_{};
 
+  // The inserted crypto object pointers will not be removed from this map.
   absl::flat_hash_map<std::string, Envoy::Common::Crypto::CryptoObjectPtr> public_key_storage_;
 };
 
diff --git a/tools/code_format/check_format.py b/tools/code_format/check_format.py
index 0f1ebfc5b9..e35e52104a 100755
--- a/tools/code_format/check_format.py
+++ b/tools/code_format/check_format.py
@@ -762,6 +762,10 @@ def checkSourceLine(line, file_path, reportError):
         reportError("Don't introduce throws into exception-free files, use error " +
                     "statuses instead.")
 
+  if "lua_pushlightuserdata" in line:
+    reportError("Don't use lua_pushlightuserdata, since it can cause unprotected error in call to" +
+                "Lua API (bad light userdata pointer) on ARM64 architecture. See " +
+                "https://github.com/LuaJIT/LuaJIT/issues/450#issuecomment-433659873 for details.")
 
 def checkBuildLine(line, file_path, reportError):
   if "@bazel_tools" in line and not (isSkylarkFile(file_path) or file_path.startswith("./bazel/") or
