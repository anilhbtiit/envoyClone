config {
  name: "foo"
  virtual_hosts {
    name: "www2"
    domains: "www.lyft.com"
    routes {
      match {
        prefix: "/new_endpoint"
      }
      route {
        cluster: "www2"
        prefix_rewrite: "/api/new_endpoint"
        response_headers_to_add {
          header {
            key: "x-global-header1"
            value: "route-override"
          }
        }
        response_headers_to_add {
          header {
            key: "x-vhost-header1"
            value: "route-override"
          }
        }
        response_headers_to_add {
          header {
            key: "x-route-action-header"
            value: "route-new_endpoint"
          }
        }
      }
      response_headers_to_add {
        header {
          key: "x-route-header"
          value: "route-override"
        }
      }
    }
    routes {
      match {
        path: "/"
      }
      route {
        cluster: "root_www2"
        response_headers_to_add {
          header {
            key: "x-route-action-header"
            value: "route-allpath"
          }
        }
        response_headers_to_remove: "x-route-remove"
      }
    }
    routes {
      match {
        prefix: "/"
      }
      route {
        cluster: "www2"
      }
    }
    response_headers_to_add {
      header {
        key: "x-global-header1"
        value: "vhost-override"
      }
    }
    response_headers_to_add {
      header {
        key: "x-vhost-header1"
        value: "vhost1-www2"
      }
    }
    response_headers_to_remove: "x-vhost-remove"
  }
  virtual_hosts {
    name: "www2_staging"
    domains: "www-staging.lyft.net"
    routes {
      match {
        prefix: "/"
      }
      route {
        cluster: "www2_staging"
        response_headers_to_add {
          header {
            key: "x-route-action-header"
            value: "route-allprefix"
          }
        }
      }
    }
    response_headers_to_add {
      header {
        key: "x-vhost-header1"
        value: "vhost1-www2_staging"
      }
    }
  }
  virtual_hosts {
    name: "default"
    domains: "*"
    routes {
      match {
        prefix: "/"
      }
      route {
        cluster: "instant-server"
      }
    }
  }
  internal_only_headers: "x-lyft-user-id"
  response_headers_to_add {
    header {
      key: "x-global-header1"
      value: "global1"
    }
  }
  response_headers_to_remove: "x-global-remove"
}
headers {
  headers {
    key: ":authority"
    value: "www-staging.lyft.net"
  }
  headers {
    key: ":path"
    value: "/foo"
  }
  headers {
    key: ":method"
    value: "GET"
  }
}
