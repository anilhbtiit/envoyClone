config {
  virtual_hosts {
    name: "www1"
    domains: "www1.lyft.com"
    routes {
      match {
        prefix: "/"
      }
      route {
        weighted_clusters {
          clusters {
            name: "cluster1"
            weight {
              value: 30
            }
          }
          clusters {
            name: "cluster2"
            weight {
              value: 30
            }
          }
          clusters {
            name: "cluster3"
            weight {
              value: 40
            }
          }
        }
      }
      metadata {
        filter_metadata {
          key: "com.bar.foo"
          value {
            fields {
              key: "baz"
              value {
                string_value: "test_value"
              }
            }
          }
        }
      }
      decorator {
        operation: "hello"
      }
    }
  }
  virtual_hosts {
    name: "www2"
    domains: "www2.lyft.com"
    routes {
      match {
        prefix: "/"
      }
      route {
        weighted_clusters {
          clusters {
            name: "cluster1"
            weight {
              value: 2000
            }
          }
          clusters {
            name: "cluster2"
            weight {
              value: 3000
            }
          }
          clusters {
            name: "cluster3"
            weight {
              value: 5000
            }
          }
          total_weight {
            value: 10000
          }
        }
      }
    }
  }
  virtual_hosts {
    name: "www3"
    domains: "www3.lyft.com"
    routes {
      match {
        prefix: "/"
      }
      route {
        weighted_clusters {
          clusters {
            name: "cluster1"
            weight {
              value: 30
            }
          }
          clusters {
            name: "cluster2"
            weight {
              value: 30
            }
          }
          clusters {
            name: "cluster3"
            weight {
              value: 40
            }
          }
          runtime_key_prefix: "www3_weights"
        }
      }
    }
  }
  virtual_hosts {
    name: "www4"
    domains: "www4.lyft.com"
    routes {
      match {
        prefix: "/"
      }
      route {
        weighted_clusters {
          clusters {
            name: "cluster1"
            weight {
              value: 2000
            }
          }
          clusters {
            name: "cluster2"
            weight {
              value: 3000
            }
          }
          clusters {
            name: "cluster3"
            weight {
              value: 5000
            }
          }
          runtime_key_prefix: "www4_weights"
          total_weight {
            value: 10000
          }
        }
      }
    }
  }
}
headers {
  headers {
    key: ":authority"
    value: "www2.lyft.com"
  }
  headers {
    key: ":path"
    value: "/foo"
  }
  headers {
    key: ":method"
    value: "GET"
  }
}
random_value: 1150
