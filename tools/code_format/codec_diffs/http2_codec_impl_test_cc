--- 
+++ 
@@ -6,7 +6,7 @@
 
 #include "common/http/exception.h"
 #include "common/http/header_map_impl.h"
-#include "common/http/http2/codec_impl.h"
+#include "common/http/http2/codec_impl_legacy.h"
 
 #include "test/common/http/common.h"
 #include "test/common/http/http2/http2_frame.h"
@@ -23,7 +23,7 @@
 #include "test/test_common/test_runtime.h"
 #include "test/test_common/utility.h"
 
-#include "codec_impl_test_util.h"
+#include "codec_impl_legacy_test_util.h"
 #include "gmock/gmock.h"
 #include "gtest/gtest.h"
 
@@ -38,10 +38,12 @@
 
 namespace Envoy {
 namespace Http {
+namespace Legacy {
 namespace Http2 {
 
 using Http2SettingsTuple = ::testing::tuple<uint32_t, uint32_t, uint32_t, uint32_t>;
 using Http2SettingsTestParam = ::testing::tuple<Http2SettingsTuple, Http2SettingsTuple>;
+using Http::Http2::Http2Frame;
 namespace CommonUtility = ::Envoy::Http2::Utility;
 
 class Http2CodecImplTestFixture {
@@ -2063,7 +2065,7 @@
 protected:
   friend class TestNghttp2SessionFactory;
 
-  MetadataEncoder encoder_;
+  Http::Http2::MetadataEncoder encoder_;
 };
 
 class TestNghttp2SessionFactory : public Nghttp2SessionFactory {
@@ -2156,6 +2158,7 @@
 }
 
 } // namespace Http2
+} // namespace Legacy
 } // namespace Http
 } // namespace Envoy
 