config {
  virtual_hosts {
    name: "www2"
    domains: "lyft.com"
    domains: "www.lyft.com"
    domains: "w.lyft.com"
    domains: "ww.lyft.com"
    domains: "wwww.lyft.com"
    routes {
      match {
        prefix: "/new_endpoint"
      }
      route {
        cluster: "www2"
        prefix_rewrite: "/api/new_endpoint"
        request_headers_to_add {
          header {
            key: "x-client-ip"
            value: "%DOWNSTREAM_REMOTE_ADDRESS_WITHOUT_PORT%"
          }
        }
      }
    }
    request_headers_to_add {
      header {
        key: "x-client-ip"
        value: "%DOWNSTREAM_REMOTE_ADDRESS_WITHOUT_PORT%"
      }
    }
  }
  request_headers_to_add {
    header {
      key: "x-client-ip"
      value: "%DOWNSTREAM_REMOTE_ADDRESS_WITHOUT_PORT%"
    }
  }
}
headers {
  headers {
    key: ":authority"
    value: "www.lyft.com"
  }
  headers {
    key: ":path"
    value: "/new_endpoint/foo"
  }
  headers {
    key: ":method"
    value: "GET"
  }
}
